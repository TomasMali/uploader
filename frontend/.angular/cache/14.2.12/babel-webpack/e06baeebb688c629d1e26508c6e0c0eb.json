{"ast":null,"code":"import { Renderer2 } from '@angular/core';\nimport { HttpEventType, HttpResponse } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/file-upload.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../file-size.pipe\";\nimport * as i4 from \"../../order-by.pipe\";\n\nconst _c0 = function (a0) {\n  return {\n    width: a0\n  };\n};\n\nfunction FileUploadComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(3, _c0, ctx_r0.progress + \"%\"));\n    i0.ɵɵattribute(\"aria-valuenow\", ctx_r0.progress);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.progress, \"% \");\n  }\n}\n\nfunction FileUploadComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.message, \"\\n\");\n  }\n}\n\nfunction FileUploadComponent_tr_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\")(2, \"a\", 15);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"fileSize\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\")(11, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function FileUploadComponent_tr_24_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const file_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.delete(file_r3.name));\n    });\n    i0.ɵɵtext(12, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const file_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"href\", file_r3.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(file_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 4, file_r3.createdAt));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(9, 6, file_r3.size));\n  }\n}\n\nexport class FileUploadComponent {\n  constructor(uploadService, renderer) {\n    this.uploadService = uploadService;\n    this.renderer = renderer;\n    this.progress = 0;\n    this.message = '';\n  }\n\n  updateLabel(event) {\n    const fileInput = event.target;\n    const label = fileInput.nextElementSibling; // Cast to HTMLElement\n\n    if (label) {\n      if (fileInput.files && fileInput.files.length > 0) {\n        this.renderer.setProperty(label.querySelector('.file-name'), 'textContent', fileInput.files[0].name);\n      } else {\n        this.renderer.setProperty(label.querySelector('.file-name'), 'textContent', ''); // Clear the label if no file is selected\n      }\n    }\n  }\n\n  ngOnInit() {\n    this.fileInfos = this.uploadService.getFiles();\n  }\n\n  selectFile(event) {\n    this.selectedFiles = event.target.files;\n  }\n\n  delete(file) {\n    this.uploadService.delete(file).subscribe({\n      next: event => {\n        if (event.type === HttpEventType.UploadProgress) {\n          this.progress = Math.round(100 * event.loaded / event.total);\n        } else if (event instanceof HttpResponse) {\n          this.message = event.body.message;\n          this.fileInfos = this.uploadService.getFiles();\n        }\n      },\n      error: err => {\n        console.log(err);\n        this.progress = 0;\n\n        if (err.error && err.error.message) {\n          this.message = err.error.message;\n        } else {\n          this.message = 'Could not delete the file!';\n        }\n\n        this.currentFile = undefined;\n      }\n    });\n  }\n\n  upload() {\n    this.progress = 0;\n\n    if (this.selectedFiles) {\n      const file = this.selectedFiles.item(0);\n\n      if (file) {\n        this.currentFile = file;\n        this.uploadService.upload(this.currentFile).subscribe({\n          next: event => {\n            if (event.type === HttpEventType.UploadProgress) {\n              this.progress = Math.round(100 * event.loaded / event.total);\n            } else if (event instanceof HttpResponse) {\n              this.message = event.body.message;\n              this.fileInfos = this.uploadService.getFiles();\n            }\n          },\n          error: err => {\n            console.log(err);\n            this.progress = 0;\n\n            if (err.error && err.error.message) {\n              this.message = err.error.message;\n            } else {\n              this.message = 'Could not upload the file!';\n            }\n\n            this.currentFile = undefined;\n          }\n        });\n      }\n\n      this.selectedFiles = undefined;\n    }\n  }\n\n}\n\nFileUploadComponent.ɵfac = function FileUploadComponent_Factory(t) {\n  return new (t || FileUploadComponent)(i0.ɵɵdirectiveInject(i1.FileUploadService), i0.ɵɵdirectiveInject(i0.Renderer2));\n};\n\nFileUploadComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FileUploadComponent,\n  selectors: [[\"app-file-upload\"]],\n  decls: 27,\n  vars: 10,\n  consts: [[1, \"row\", \"mb-4\", 2, \"margin-top\", \"100px\"], [1, \"col-8\"], [1, \"custom-file-upload\"], [\"type\", \"file\", 3, \"change\"], [1, \"btn\", \"btn-primary\"], [1, \"file-name\"], [1, \"col-4\"], [1, \"btn\", \"btn-success\", \"btn-sm\", 3, \"disabled\", \"click\"], [\"class\", \"progress my-3\", 4, \"ngIf\"], [\"class\", \"alert alert-secondary\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"table\", \"table-striped\", 2, \"margin-top\", \"60px\"], [4, \"ngFor\", \"ngForOf\"], [1, \"progress\", \"my-3\"], [\"role\", \"progressbar\", \"aria-valuemin\", \"0\", \"aria-valuemax\", \"100\", 1, \"progress-bar\", \"progress-bar-info\", 3, \"ngStyle\"], [\"role\", \"alert\", 1, \"alert\", \"alert-secondary\"], [3, \"href\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-danger\", 3, \"click\"]],\n  template: function FileUploadComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"label\", 2)(3, \"input\", 3);\n      i0.ɵɵlistener(\"change\", function FileUploadComponent_Template_input_change_3_listener($event) {\n        return ctx.updateLabel($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"span\", 4);\n      i0.ɵɵtext(5, \"Upload File\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"span\", 5);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"div\", 6)(8, \"button\", 7);\n      i0.ɵɵlistener(\"click\", function FileUploadComponent_Template_button_click_8_listener() {\n        return ctx.upload();\n      });\n      i0.ɵɵtext(9, \" Upload \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(10, FileUploadComponent_div_10_Template, 3, 5, \"div\", 8);\n      i0.ɵɵtemplate(11, FileUploadComponent_div_11_Template, 2, 1, \"div\", 9);\n      i0.ɵɵelementStart(12, \"table\", 10)(13, \"thead\")(14, \"tr\")(15, \"th\");\n      i0.ɵɵtext(16, \"File Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"th\");\n      i0.ɵɵtext(18, \"Uploaded at\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"th\");\n      i0.ɵɵtext(20, \"File Size\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"th\");\n      i0.ɵɵtext(22, \"Actions\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(23, \"tbody\");\n      i0.ɵɵtemplate(24, FileUploadComponent_tr_24_Template, 13, 8, \"tr\", 11);\n      i0.ɵɵpipe(25, \"orderBy\");\n      i0.ɵɵpipe(26, \"async\");\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"disabled\", !ctx.selectedFiles);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.currentFile);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.message);\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind3(25, 4, i0.ɵɵpipeBind1(26, 8, ctx.fileInfos), \"createdAt\", \"desc\"));\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i2.NgStyle, i2.AsyncPipe, i2.DatePipe, i3.FileSizePipe, i4.OrderByPipe],\n  styles: [\".custom-file-upload[_ngcontent-%COMP%] {\\n    display: inline-block;\\n    position: relative;\\n    cursor: pointer;\\n  }\\n  \\n  .custom-file-upload[_ngcontent-%COMP%]   input[type=\\\"file\\\"][_ngcontent-%COMP%] {\\n    display: none;\\n  }\\n  \\n  .custom-file-upload[_ngcontent-%COMP%]   span.btn[_ngcontent-%COMP%] {\\n    padding: 6px 12px;\\n    background-color: #007bff; \\n    color: #fff;\\n    border: none;\\n    border-radius: 4px;\\n    cursor: pointer;\\n  }\\n  \\n  .custom-file-upload[_ngcontent-%COMP%]   span.btn[_ngcontent-%COMP%]:hover {\\n    background-color: #0056b3; \\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGUtdXBsb2FkLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxxQkFBcUI7SUFDckIsa0JBQWtCO0lBQ2xCLGVBQWU7RUFDakI7O0VBRUE7SUFDRSxhQUFhO0VBQ2Y7O0VBRUE7SUFDRSxpQkFBaUI7SUFDakIseUJBQXlCLEVBQUUsNkJBQTZCO0lBQ3hELFdBQVc7SUFDWCxZQUFZO0lBQ1osa0JBQWtCO0lBQ2xCLGVBQWU7RUFDakI7O0VBRUE7SUFDRSx5QkFBeUIsRUFBRSxnQkFBZ0I7RUFDN0MiLCJmaWxlIjoiZmlsZS11cGxvYWQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jdXN0b20tZmlsZS11cGxvYWQge1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICB9XG4gIFxuICAuY3VzdG9tLWZpbGUtdXBsb2FkIGlucHV0W3R5cGU9XCJmaWxlXCJdIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG4gIFxuICAuY3VzdG9tLWZpbGUtdXBsb2FkIHNwYW4uYnRuIHtcbiAgICBwYWRkaW5nOiA2cHggMTJweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmOyAvKiBVc2UgdGhlIGNvbG9yIHlvdSBwcmVmZXIgKi9cbiAgICBjb2xvcjogI2ZmZjtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgfVxuICBcbiAgLmN1c3RvbS1maWxlLXVwbG9hZCBzcGFuLmJ0bjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAwNTZiMzsgLyogSG92ZXIgY29sb3IgKi9cbiAgfVxuICAiXX0= */\"]\n});","map":{"version":3,"mappings":"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","names":["Renderer2","HttpEventType","HttpResponse","i0","FileUploadComponent","constructor","uploadService","renderer","updateLabel","event","fileInput","target","label","nextElementSibling","files","length","setProperty","querySelector","name","ngOnInit","fileInfos","getFiles","selectFile","selectedFiles","delete","file","subscribe","next","type","UploadProgress","progress","Math","round","loaded","total","message","body","error","err","console","log","currentFile","undefined","upload","item","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/tommal/Desktop/uploader/frontend/src/app/components/file-upload/file-upload.component.ts","/Users/tommal/Desktop/uploader/frontend/src/app/components/file-upload/file-upload.component.html"],"sourcesContent":["import { Component, OnInit, Renderer2} from '@angular/core';\nimport { HttpEventType, HttpResponse } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { FileUploadService } from 'src/app/services/file-upload.service';\n\n@Component({\n  selector: 'app-file-upload',\n  templateUrl: './file-upload.component.html',\n  styleUrls: ['./file-upload.component.css']\n})\nexport class FileUploadComponent implements OnInit {\n  selectedFiles?: FileList;\n  currentFile?: File;\n  progress = 0;\n  message = '';\n\n  fileInfos?: Observable<any>;\n\n  constructor(private uploadService: FileUploadService, private renderer: Renderer2) {}\n\n\n  updateLabel(event: any): void {\n    const fileInput = event.target;\n    const label = fileInput.nextElementSibling as HTMLElement; // Cast to HTMLElement\n  \n    if (label) {\n      if (fileInput.files && fileInput.files.length > 0) {\n        this.renderer.setProperty(label.querySelector('.file-name'), 'textContent', fileInput.files[0].name);\n      } else {\n        this.renderer.setProperty(label.querySelector('.file-name'), 'textContent', ''); // Clear the label if no file is selected\n      }\n    }\n  }\n  \n  \n  \n\n  ngOnInit(): void {\n    this.fileInfos = this.uploadService.getFiles();\n\n  }\n\n  selectFile(event: any): void {\n    this.selectedFiles = event.target.files;\n  }\n\n\n  delete(file: string): void {\n    this.uploadService.delete(file).subscribe({\n      next: (event: any) => {\n        if (event.type === HttpEventType.UploadProgress) {\n          this.progress = Math.round((100 * event.loaded) / event.total);\n        } else if (event instanceof HttpResponse) {\n          this.message = event.body.message;\n          this.fileInfos = this.uploadService.getFiles();\n        }\n      },\n      error: (err: any) => {\n        console.log(err);\n        this.progress = 0;\n\n        if (err.error && err.error.message) {\n          this.message = err.error.message;\n        } else {\n          this.message = 'Could not delete the file!';\n        }\n        this.currentFile = undefined;\n      },\n    });\n  }\n\n  upload(): void {\n    this.progress = 0;\n\n    if (this.selectedFiles) {\n      const file: File | null = this.selectedFiles.item(0);\n\n      if (file) {\n        this.currentFile = file;\n\n        this.uploadService.upload(this.currentFile).subscribe({\n          next: (event: any) => {\n            if (event.type === HttpEventType.UploadProgress) {\n              this.progress = Math.round((100 * event.loaded) / event.total);\n            } else if (event instanceof HttpResponse) {\n              this.message = event.body.message;\n              this.fileInfos = this.uploadService.getFiles();\n            }\n          },\n          error: (err: any) => {\n            console.log(err);\n            this.progress = 0;\n\n            if (err.error && err.error.message) {\n              this.message = err.error.message;\n            } else {\n              this.message = 'Could not upload the file!';\n            }\n\n            this.currentFile = undefined;\n          },\n        });\n      }\n\n      this.selectedFiles = undefined;\n    }\n  }\n}\n","<div class=\"row mb-4\" style=\"margin-top: 100px;\">\n  <div class=\"col-8\">\n    <label class=\"custom-file-upload\">\n      <input type=\"file\" (change)=\"updateLabel($event)\" />\n      <span class=\"btn btn-primary\">Upload File</span>\n      <span class=\"file-name\"></span>\n    </label>\n  </div>\n  <div class=\"col-4\">\n    <button\n      class=\"btn btn-success btn-sm\"\n      [disabled]=\"!selectedFiles\"\n      (click)=\"upload()\"\n    >\n      Upload\n    </button>\n  </div>\n</div>\n\n<div *ngIf=\"currentFile\" class=\"progress my-3\">\n  <div\n    class=\"progress-bar progress-bar-info\"\n    role=\"progressbar\"\n    attr.aria-valuenow=\"{{ progress }}\"\n    aria-valuemin=\"0\"\n    aria-valuemax=\"100\"\n    [ngStyle]=\"{ width: progress + '%' }\"\n  >\n    {{ progress }}%\n  </div>\n</div>\n\n<div *ngIf=\"message\" class=\"alert alert-secondary\" role=\"alert\">\n  {{ message }}\n</div>\n\n<!-- <div class=\"card mt-3\">\n  <div class=\"card-header\">List of Files</div>\n  <ul class=\"list-group list-group-flush\">\n    <li *ngFor=\"let file of fileInfos | async\" class=\"list-group-item\">\n      <a href=\"{{ file.url }}\">{{ file.name }}</a>   <button (click)=\"delete(file.name )\" type=\"button\" class=\"btn btn-sm btn-danger ml-5\">Delete</button>  createdAt -  {{ file.createdAt | date }}\n      updatedAt -  {{ file.updatedAt | date }}    size -  {{ file.size }}\n    </li>\n  </ul>\n</div> -->\n\n\n \n<table class=\"table table-striped \" style=\"margin-top: 60px;\">\n  <thead>\n    <tr>\n      <th>File Name</th>\n      <th>Uploaded at</th>\n      <th>File Size</th>\n      <th>Actions</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr *ngFor=\"let file of fileInfos | async | orderBy: 'createdAt':'desc' \">\n      <td><a href=\"{{ file.url }}\">{{ file.name }}</a></td>\n      <td>{{ file.createdAt | date }}</td>\n      <td>{{ file.size | fileSize }}</td>\n      <td>\n        <button (click)=\"delete(file.name)\" type=\"button\" class=\"btn btn-sm btn-danger\">Delete</button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n"]},"metadata":{},"sourceType":"module"}